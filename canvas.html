<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
        name="viewport">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="assets/css/style.css">
  <title>TITLE</title>
</head>
<style>
</style>

<body>
<div class="circle-container">
  <div class="canvas-container">
    <canvas id="canvas" class="canvas" width="250" height="250"></canvas>
    <div class="x-axis" id="xAxis"></div>
    <div class="y-axis" id="yAxis"></div>
  </div>
  <i class="icon-go">开始</i>
</div>
<script src="assets/js/utils.js"></script>
<script>
  let xAxis = document.getElementById('xAxis');
  let yAxis = document.getElementById('yAxis');
  
  function Circle(num) {
    this.canvas = document.querySelector('#canvas');
		this.ctx = this.canvas.getContext('2d');
		this.width = +this.canvas.getAttribute('width');
		this.height = +this.canvas.getAttribute('height');
		this.center = {x: this.width / 2, y: this.height / 2};
		this.radius = this.center.x;
		this.num = num;
		this.iconUrls = [];
    for (let i = 0; i < 6; i++) {
			this.iconUrls.push(`assets/img/${i + 1}.png`);
    };
		
		this.drawArc();
	}
	Circle.prototype.drawArc = function() {
		for (let i = 0 ; i < this.num; i++) {
			/*画扇形*/
			this.ctx.beginPath();
			this.ctx.moveTo(this.center.x, this.center.y);
			const start = (2 * i + 1) * Math.PI / this.num;
			const end = (2 * i + 3) * Math.PI / this.num;
			this.ctx.arc(this.center.x, this.center.y, this.radius, start, end);
			this.ctx.strokeStyle = 'transparent';
			this.ctx.closePath();
			this.ctx.fillStyle = getRandomColor();
			this.ctx.fill();
			/*画扇形end*/
			
			/*放小图标*/
			/*let angle = (2 * i + 1) * 30 * Math.PI / 180;
			let x = this.radius - this.radius * Math.sin(angle) + 40 * Math.sin(angle);
			let y = this.radius - this.radius * Math.cos(angle) + 40 * Math.cos(angle);
			yAxis.style.left = x + 'px';
			xAxis.style.top = y + 'px';
			
			this.ctx.save();
			this.ctx.translate(x, y);
			this.ctx.rotate(-angle);
			
			let img1 = new Image();
			img1.src = this.iconUrls[i];
			img1.onload = () => {
				this.ctx.drawImage(img1, -30, -30, 60, 60);
				this.ctx.restore();
			}*/
		}
		
		/*放小图标*/
		let j = 4;
		let angle = (2 * j + 1) * 30 * Math.PI / 180;
		let x = this.radius - this.radius * Math.sin(angle) + 40 * Math.sin(angle);
		let y = this.radius - this.radius * Math.cos(angle) + 40 * Math.cos(angle);
		yAxis.style.left = x + 'px';
		xAxis.style.top = y + 'px';
		
		this.ctx.translate(x, y);
		this.ctx.rotate(-angle);
		
		let img1 = new Image();
		img1.src = this.iconUrls[j];
		img1.onload = () => {
			this.ctx.drawImage(img1, -30, -30, 60, 60);
		}
    
    let j1 = 5;
		let angle1 = (2 * j1 + 1) * 30 * Math.PI / 180;
		let x1 = this.radius - this.radius * Math.sin(angle1) + 40 * Math.sin(angle1);
		let y1 = this.radius - this.radius * Math.cos(angle1) + 40 * Math.cos(angle1);
		yAxis.style.left = x1 + 'px';
		xAxis.style.top = y1 + 'px';
		
		this.ctx.translate(x1, y1);
		this.ctx.rotate(-angle1);
		
		let img2 = new Image();
		img2.src = this.iconUrls[j1];
		img2.onload = () => {
			this.ctx.drawImage(img2, -30, -30, 60, 60);
		}
		
	}
	
	Circle.prototype.drawIcons = function() {
  	let num = 0;
		this.iconUrls.forEach(url => {
			let img = new Image();
			img.src = url;
			img.onload = () => {
        // this.ctx.drawImage(img, )
      }
    })
  }
 
	new Circle(6);
 
</script>
</body>
</html>